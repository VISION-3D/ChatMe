{"ast":null,"code":"var _jsxFileName = \"D:\\\\bureau\\\\chatme\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [rooms, setRooms] = useState([]);\n  const [myRooms, setMyRooms] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Charger au démarrage\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      checkAuth(token);\n    }\n  }, []);\n  const checkAuth = async token => {\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/profile', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setUser(data.data.user);\n        loadRooms(token);\n      }\n    } catch (error) {\n      localStorage.removeItem('token');\n    }\n  };\n  const loadRooms = async token => {\n    try {\n      setLoading(true);\n\n      // Mes salons\n      const myResponse = await fetch('http://localhost:5000/api/chatrooms/my', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const myData = await myResponse.json();\n      if (myData.success) {\n        setMyRooms(myData.data.chatRooms);\n        console.log('✅ Mes salons chargés:', myData.data.chatRooms.length);\n      }\n\n      // Salons publics\n      const publicResponse = await fetch('http://localhost:5000/api/chatrooms', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const publicData = await publicResponse.json();\n      if (publicData.success) {\n        setRooms(publicData.data.chatRooms);\n        console.log('✅ Salons publics chargés:', publicData.data.chatRooms.length);\n      }\n    } catch (error) {\n      console.error('Erreur:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const login = async (email, password) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        localStorage.setItem('token', data.data.token);\n        setUser(data.data.user);\n        loadRooms(data.data.token);\n      }\n    } catch (error) {\n      console.error('Erreur connexion:', error);\n    }\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '50px',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => login('votre@email.com', 'votremotdepasse'),\n        children: \"Se connecter (test)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        background: '#007bff',\n        color: 'white',\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Chat App - Bonjour \", user.username, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          localStorage.removeItem('token');\n          setUser(null);\n        },\n        children: \"D\\xE9connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Mes Salons (\", myRooms.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), myRooms.map(room => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #ccc',\n          padding: '10px',\n          margin: '5px'\n        },\n        children: [room.name, \" - Membres: \", room.members.length]\n      }, room._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Salons Publics (\", rooms.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), rooms.map(room => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #ccc',\n          padding: '10px',\n          margin: '5px'\n        },\n        children: [room.name, \" - Cr\\xE9\\xE9 par: \", room.createdBy.username]\n      }, room._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"uc+A1dTQqJdwEmDezoXfWDYkngw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","user","setUser","rooms","setRooms","myRooms","setMyRooms","loading","setLoading","token","localStorage","getItem","checkAuth","response","fetch","headers","data","json","success","loadRooms","error","removeItem","myResponse","myData","chatRooms","console","log","length","publicResponse","publicData","login","email","password","method","body","JSON","stringify","setItem","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","background","color","username","map","room","border","margin","name","members","_id","createdBy","_c","$RefreshReg$"],"sources":["D:/bureau/chatme/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [rooms, setRooms] = useState([]);\n  const [myRooms, setMyRooms] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Charger au démarrage\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      checkAuth(token);\n    }\n  }, []);\n\n  const checkAuth = async (token) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/profile', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setUser(data.data.user);\n        loadRooms(token);\n      }\n    } catch (error) {\n      localStorage.removeItem('token');\n    }\n  };\n\n  const loadRooms = async (token) => {\n    try {\n      setLoading(true);\n      \n      // Mes salons\n      const myResponse = await fetch('http://localhost:5000/api/chatrooms/my', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const myData = await myResponse.json();\n      if (myData.success) {\n        setMyRooms(myData.data.chatRooms);\n        console.log('✅ Mes salons chargés:', myData.data.chatRooms.length);\n      }\n\n      // Salons publics\n      const publicResponse = await fetch('http://localhost:5000/api/chatrooms', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const publicData = await publicResponse.json();\n      if (publicData.success) {\n        setRooms(publicData.data.chatRooms);\n        console.log('✅ Salons publics chargés:', publicData.data.chatRooms.length);\n      }\n    } catch (error) {\n      console.error('Erreur:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const login = async (email, password) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      const data = await response.json();\n      if (data.success) {\n        localStorage.setItem('token', data.data.token);\n        setUser(data.data.user);\n        loadRooms(data.data.token);\n      }\n    } catch (error) {\n      console.error('Erreur connexion:', error);\n    }\n  };\n\n  if (!user) {\n    return (\n      <div style={{ padding: '50px', textAlign: 'center' }}>\n        <h2>Connexion</h2>\n        <button onClick={() => login('votre@email.com', 'votremotdepasse')}>\n          Se connecter (test)\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <header style={{ background: '#007bff', color: 'white', padding: '20px' }}>\n        <h1>Chat App - Bonjour {user.username}!</h1>\n        <button onClick={() => {\n          localStorage.removeItem('token');\n          setUser(null);\n        }}>Déconnexion</button>\n      </header>\n\n      <div style={{ padding: '20px' }}>\n        <h2>Mes Salons ({myRooms.length})</h2>\n        {myRooms.map(room => (\n          <div key={room._id} style={{ border: '1px solid #ccc', padding: '10px', margin: '5px' }}>\n            {room.name} - Membres: {room.members.length}\n          </div>\n        ))}\n\n        <h2>Salons Publics ({rooms.length})</h2>\n        {rooms.map(room => (\n          <div key={room._id} style={{ border: '1px solid #ccc', padding: '10px', margin: '5px' }}>\n            {room.name} - Créé par: {room.createdBy.username}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}